[{"/home/fullfix/Documents/GitHub/DronePoint/client/src/reportWebVitals.js":"1","/home/fullfix/Documents/GitHub/DronePoint/client/src/index.js":"2","/home/fullfix/Documents/GitHub/DronePoint/client/src/contexts/UserContext.jsx":"3","/home/fullfix/Documents/GitHub/DronePoint/client/src/App.jsx":"4","/home/fullfix/Documents/GitHub/DronePoint/client/src/components/shared/HeaderMenu.jsx":"5","/home/fullfix/Documents/GitHub/DronePoint/client/src/components/shared/DroneMap.jsx":"6","/home/fullfix/Documents/GitHub/DronePoint/client/src/components/MakeOrder/OrderDetails.jsx":"7","/home/fullfix/Documents/GitHub/DronePoint/client/src/components/shared/LoadingSpinner.jsx":"8","/home/fullfix/Documents/GitHub/DronePoint/client/src/utils/api.js":"9","/home/fullfix/Documents/GitHub/DronePoint/client/src/components/OrderPage/OrderPage.jsx":"10","/home/fullfix/Documents/GitHub/DronePoint/client/src/components/OrderPage/index.js":"11","/home/fullfix/Documents/GitHub/DronePoint/client/src/components/MakeOrder/index.js":"12","/home/fullfix/Documents/GitHub/DronePoint/client/src/components/MakeOrder/MakeOrder.jsx":"13","/home/fullfix/Documents/GitHub/DronePoint/client/src/routes/ProtectedRoute.jsx":"14","/home/fullfix/Documents/GitHub/DronePoint/client/src/components/MyOrders/MyOrders.jsx":"15","/home/fullfix/Documents/GitHub/DronePoint/client/src/components/Auth/Login.jsx":"16","/home/fullfix/Documents/GitHub/DronePoint/client/src/components/shared/BottomMenu.jsx":"17","/home/fullfix/Documents/GitHub/DronePoint/client/src/components/Auth/Register.jsx":"18","/home/fullfix/Documents/GitHub/DronePoint/client/src/components/OrderPage/DroneLocation.jsx":"19"},{"size":362,"mtime":1606229592683,"results":"20","hashOfConfig":"21"},{"size":500,"mtime":1606229592683,"results":"22","hashOfConfig":"21"},{"size":2569,"mtime":1608047051962,"results":"23","hashOfConfig":"21"},{"size":2230,"mtime":1609080569217,"results":"24","hashOfConfig":"21"},{"size":456,"mtime":1608485221218,"results":"25","hashOfConfig":"21"},{"size":3661,"mtime":1609080483077,"results":"26","hashOfConfig":"21"},{"size":4282,"mtime":1609074821393,"results":"27","hashOfConfig":"21"},{"size":558,"mtime":1608485689900,"results":"28","hashOfConfig":"21"},{"size":727,"mtime":1609081836470,"results":"29","hashOfConfig":"21"},{"size":2698,"mtime":1609081833814,"results":"30","hashOfConfig":"21"},{"size":63,"mtime":1607759127813,"results":"31","hashOfConfig":"21"},{"size":63,"mtime":1607759035822,"results":"32","hashOfConfig":"21"},{"size":3475,"mtime":1609079540804,"results":"33","hashOfConfig":"21"},{"size":722,"mtime":1607942945734,"results":"34","hashOfConfig":"21"},{"size":1523,"mtime":1608485351118,"results":"35","hashOfConfig":"21"},{"size":3311,"mtime":1608485357554,"results":"36","hashOfConfig":"21"},{"size":1879,"mtime":1608020596524,"results":"37","hashOfConfig":"21"},{"size":3442,"mtime":1608047127690,"results":"38","hashOfConfig":"21"},{"size":580,"mtime":1609081347137,"results":"39","hashOfConfig":"21"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},"1j6kizk",{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"47","usedDeprecatedRules":"42"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"50","usedDeprecatedRules":"42"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"53","messages":"54","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"55","messages":"56","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"61","messages":"62","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"69","usedDeprecatedRules":"42"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"74","messages":"75","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"80","usedDeprecatedRules":"42"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/home/fullfix/Documents/GitHub/DronePoint/client/src/reportWebVitals.js",[],["83","84"],"/home/fullfix/Documents/GitHub/DronePoint/client/src/index.js",[],"/home/fullfix/Documents/GitHub/DronePoint/client/src/contexts/UserContext.jsx",["85"],"import React, { createContext, useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { toast } from 'react-toastify';\n\nexport const UserContext = createContext({\n    user: null,\n    isAuthenticated: false,\n    isLoading: true,\n    logout: () => {},\n    login: async ({ username, password }) => {},\n    register: async ({ username, password }) => {},\n})\n\nconst UserProvider = ({ children }) => {\n    const [user, setUser] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const token = localStorage.getItem('token');\n    axios.defaults.headers.common['Authorization'] = 'Bearer ' + token;\n\n    const logout = () => {\n        localStorage.removeItem('Authorization');\n        setUser(null);\n    }\n\n    const login = async ({ username, password }) => {\n        try {\n            const res = await axios.post('/api/auth/login', {\n                username,\n                password,\n            });\n            localStorage.setItem('token', res.data.response.token);\n            setUser(res.data.response.user);\n            return true;\n        } catch (err) {\n            console.log(err);\n            return false;\n        }\n    }\n\n    const register = async ({ username, password }) => {\n        try {\n            const resRegister = await axios.post('/api/auth/signup', {\n                username,\n                password\n            });\n            toast.success('Аккаунт зарегестрирован');\n            const res = await axios.post('/api/auth/login', {\n                username,\n                password,\n            });\n            localStorage.setItem('token', res.data.response.token);\n            setUser(res.data.response.user);\n            return true;\n        } catch (err) {\n            console.log(err);\n            toast.error(err.response.data.error.reason);\n            return false;\n        }\n    }\n    useEffect(() => {\n        const fetchUser = async () => {\n            try {\n                const res = await axios.get('/api/auth/me');\n                setUser(res.data.response.user);\n            } catch (err) {\n                console.log(err);\n            }\n            setLoading(false);\n        }\n        if (loading) fetchUser();\n    }, [loading]);\n\n    return (\n        <UserContext.Provider value={{\n            user: user,\n            isAuthenticated: !!user,\n            isLoading: loading,\n            logout: logout,\n            login: login,\n            register: register,\n        }}>\n            {children}\n        </UserContext.Provider>\n    )\n}\n\nexport default UserProvider;","/home/fullfix/Documents/GitHub/DronePoint/client/src/App.jsx",["86","87"],"import { Box, Button, Container, createMuiTheme, ThemeProvider, Typography } from '@material-ui/core';\nimport { YMaps } from 'react-yandex-maps';\nimport './App.css';\nimport UserProvider from './contexts/UserContext';\nimport { BrowserRouter as Router, Redirect, Route, Switch } from 'react-router-dom';\nimport MakeOrder from './components/MakeOrder';\nimport OrderPage from './components/OrderPage';\nimport ProtectedRoute from './routes/ProtectedRoute';\nimport MyOrders from './components/MyOrders/MyOrders';\nimport Login from './components/Auth/Login';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport BottomMenu from './components/shared/BottomMenu';\nimport Register from './components/Auth/Register';\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#FF9900',\n      contrastText: '#FFFFFF',\n    },\n    text: {\n      primary: '#000000',\n      secondary: '#4a4f52',\n    }\n  },\n  typography: {\n    fontFamily: [\n      \"'Inter'\",\n    ].join(','),\n    h2: {\n      fontSize: 20,\n      fontWeight: 'bold',\n    },\n    h3: {\n      fontSize: 18,\n    },\n    h4: {\n      fontSize: 12,\n    }\n  }\n})\n\nfunction App() {\n  return (\n    <ThemeProvider theme={theme}>\n      <UserProvider>\n        <YMaps>\n          <ToastContainer />\n          <Box bgcolor=\"#E5E5E5\">\n            <Container maxWidth=\"sm\">\n              <Box bgcolor=\"white\" minHeight=\"100vh\" position=\"relative\">\n                <Router>\n                  <Switch>\n                    <Route exact path=\"/\">\n                      <Redirect to=\"/makeorder\" />\n                    </Route>\n                    <Route exact path=\"/makeorder\" component={MakeOrder} />\n                    <Route exact path=\"/order/:id\" component={OrderPage} />\n                    <Route exact path=\"/login\" component={Login}/>\n                    <Route exact path=\"/register\" component={Register} />\n                    <ProtectedRoute exact path=\"/myorders\" component={MyOrders} />\n                  </Switch>\n                  <BottomMenu />\n                </Router>\n              </Box>\n            </Container>\n          </Box>\n        </YMaps>\n      </UserProvider>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","/home/fullfix/Documents/GitHub/DronePoint/client/src/components/shared/HeaderMenu.jsx",[],"/home/fullfix/Documents/GitHub/DronePoint/client/src/components/shared/DroneMap.jsx",["88"],"/home/fullfix/Documents/GitHub/DronePoint/client/src/components/MakeOrder/OrderDetails.jsx",["89","90","91","92","93"],"/home/fullfix/Documents/GitHub/DronePoint/client/src/components/shared/LoadingSpinner.jsx",[],"/home/fullfix/Documents/GitHub/DronePoint/client/src/utils/api.js",[],"/home/fullfix/Documents/GitHub/DronePoint/client/src/components/OrderPage/OrderPage.jsx",["94","95","96"],"/home/fullfix/Documents/GitHub/DronePoint/client/src/components/OrderPage/index.js",[],"/home/fullfix/Documents/GitHub/DronePoint/client/src/components/MakeOrder/index.js",[],"/home/fullfix/Documents/GitHub/DronePoint/client/src/components/MakeOrder/MakeOrder.jsx",["97","98"],"import { Box, Button, Grid, Input, Typography } from '@material-ui/core'\nimport React, { useContext, useEffect, useState } from 'react'\nimport DroneMap from '../shared/DroneMap';\nimport HeaderMenu from '../shared/HeaderMenu';\nimport OrderDetails from './OrderDetails';\nimport axios from 'axios';\nimport { UserContext } from '../../contexts/UserContext';\nimport LoadingSpinner from '../shared/LoadingSpinner';\nimport './MakeOrder.css';\n\nconst MakeOrder = () => {\n    const [placeFrom, setPlaceFrom] = useState(null);\n    const [placeTo, setPlaceTo] = useState(null);\n    const [mapOpen, setMapOpen] = useState(false);\n    const [order, setOrder] = useState(null);\n    const [isOrdering, setIsOrdering] = useState(false);\n    const { isAuthenticated } = useContext(UserContext);\n\n    useEffect(() => {\n        const makeOrder = async () => {\n            try {\n                const res = await axios.post(`/api/order/create/${isAuthenticated ? 'auth' : 'guest'}`, {\n                    placeFrom: placeFrom._id,\n                    placeTo: placeTo._id,\n                });\n                setOrder(res.data.response);\n            } catch(err) {\n                console.log(err);\n            }\n            setIsOrdering(false);\n        }\n        if (isOrdering) makeOrder();\n    }, [isOrdering, placeFrom, placeTo]);\n\n    if (isOrdering) return (\n        <LoadingSpinner height=\"100vh\"/>\n    )\n\n    return (\n        <React.Fragment>\n            <DroneMap open={mapOpen} onClose={() => setMapOpen(false)}\n            onSelect={(point, type) => {\n                if (type === 'from') {\n                    setPlaceFrom(point);\n                } else {\n                    setPlaceTo(point);\n                }\n            }}/>\n            <HeaderMenu text={\"Оформить заказ\"}/>\n            <Box position=\"relative\"\n            className=\"main-box\"\n            width=\"100wv\">\n                <Grid container alignItems=\"center\" direction=\"column\"\n                spacing={3}>\n                    <Grid item>\n                        <Box width=\"300px\">\n                            <Typography variant=\"h3\">Маршрут</Typography>\n                            <Button variant=\"text\" fullWidth \n                            disabled={!!order}\n                            onClick={e => setMapOpen('from')}\n                            style={{\n                                border: '1px solid black',\n                                marginTop: 12,\n                                textTransform: 'none',\n                            }}>\n                                {placeFrom?.name || 'Откуда'}\n                            </Button>\n                            <Button variant=\"text\" fullWidth\n                            disabled={!!order} \n                            onClick={e => setMapOpen('to')}\n                            style={{\n                                border: '1px solid black',\n                                marginTop: 12,\n                                textTransform: 'none',\n                            }}>\n                                {placeTo?.name || 'Куда'}\n                            </Button>\n                        </Box>\n                    </Grid>\n                    <OrderDetails placeFrom={placeFrom} placeTo={placeTo}\n                    order={order} \n                    onSubmit={() => setIsOrdering(true)}/>\n                </Grid>\n            </Box>\n        </React.Fragment>\n    )\n}\n\nexport default MakeOrder\n","/home/fullfix/Documents/GitHub/DronePoint/client/src/routes/ProtectedRoute.jsx",[],"/home/fullfix/Documents/GitHub/DronePoint/client/src/components/MyOrders/MyOrders.jsx",[],"/home/fullfix/Documents/GitHub/DronePoint/client/src/components/Auth/Login.jsx",["99"],"/home/fullfix/Documents/GitHub/DronePoint/client/src/components/shared/BottomMenu.jsx",[],"/home/fullfix/Documents/GitHub/DronePoint/client/src/components/Auth/Register.jsx",["100"],"import { Button, Grid, makeStyles, TextField } from '@material-ui/core'\nimport React, { useContext, useEffect, useState } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { toast } from 'react-toastify'\nimport { UserContext } from '../../contexts/UserContext'\nimport HeaderMenu from '../shared/HeaderMenu'\n\nconst useStyles = makeStyles(theme => ({\n    container: {\n        marginTop: '20px',\n        width: '100%',\n    },\n    input: {\n         \"&::placeholder\": {\n        color: \"gray\"\n      },\n    }\n}))\n\nconst Register = () => {\n    const { register } = useContext(UserContext);\n    const history = useHistory();\n    const classes = useStyles();\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const [password2, setPassword2] = useState('');\n    const [submitting, setSubmitting] = useState(false);\n\n    useEffect(() => {\n        const submit = async () => {\n            if (password !== password2) {\n                toast.warn('Пароли не совпадают');\n                return setSubmitting(false);\n            }\n            const success = await register({ username, password });\n            if (success) {\n                return history.push('/');\n            }\n            setSubmitting(false);\n        }\n        if (submitting) submit();\n    }, [submitting]);\n\n    return (\n        <React.Fragment>\n            <HeaderMenu text={'Регистрация'}/>\n            <Grid container spacing={2} direction=\"column\"\n            className={classes.container}>\n                <Grid item container justify=\"center\">\n                    <Grid item xs={10}>\n                        <TextField label=\"Логин\" variant=\"outlined\" size=\"small\"\n                        fullWidth value={username} onChange={e => setUsername(e.target.value)}/>\n                    </Grid>\n                </Grid>\n                <Grid item container justify=\"center\">\n                    <Grid item xs={10}>\n                        <TextField label=\"Пароль\" variant=\"outlined\" type=\"password\" size=\"small\"\n                        fullWidth value={password} onChange={e => setPassword(e.target.value)}/>\n                    </Grid>\n                </Grid>\n                <Grid item container justify=\"center\">\n                    <Grid item xs={10}>\n                        <TextField label=\"Подтверждение пароля\" variant=\"outlined\" type=\"password\" \n                        size=\"small\" fullWidth value={password2} \n                        onChange={e => setPassword2(e.target.value)}/>\n                    </Grid>\n                </Grid>\n                <Grid item container justify=\"center\">\n                    <Grid item xs={10}>\n                        <Button variant=\"contained\" color=\"primary\" fullWidth\n                        onClick={e => setSubmitting(true)}>\n                            Зарегистрироваться\n                        </Button>\n                    </Grid>\n                </Grid>\n                <Grid item container justify=\"center\">\n                    <Grid item xs={10}>\n                        <Button variant=\"text\" color=\"default\" fullWidth size=\"small\"\n                        href=\"/login\">\n                            Логин\n                        </Button>\n                    </Grid>\n                </Grid>\n            </Grid>\n        </React.Fragment>\n    )\n}\n\nexport default Register\n","/home/fullfix/Documents/GitHub/DronePoint/client/src/components/OrderPage/DroneLocation.jsx",["101"],{"ruleId":"102","replacedBy":"103"},{"ruleId":"104","replacedBy":"105"},{"ruleId":"106","severity":1,"message":"107","line":42,"column":19,"nodeType":"108","messageId":"109","endLine":42,"endColumn":30},{"ruleId":"106","severity":1,"message":"110","line":1,"column":15,"nodeType":"108","messageId":"109","endLine":1,"endColumn":21},{"ruleId":"106","severity":1,"message":"111","line":1,"column":65,"nodeType":"108","messageId":"109","endLine":1,"endColumn":75},{"ruleId":"106","severity":1,"message":"112","line":3,"column":18,"nodeType":"108","messageId":"109","endLine":3,"endColumn":21},{"ruleId":"106","severity":1,"message":"113","line":1,"column":23,"nodeType":"108","messageId":"109","endLine":1,"endColumn":32},{"ruleId":"106","severity":1,"message":"114","line":1,"column":65,"nodeType":"108","messageId":"109","endLine":1,"endColumn":78},{"ruleId":"106","severity":1,"message":"115","line":3,"column":10,"nodeType":"108","messageId":"109","endLine":3,"endColumn":20},{"ruleId":"116","severity":1,"message":"117","line":9,"column":9,"nodeType":"108","messageId":"118","endLine":9,"endColumn":13},{"ruleId":"116","severity":1,"message":"119","line":10,"column":9,"nodeType":"108","messageId":"118","endLine":10,"endColumn":13},{"ruleId":"106","severity":1,"message":"120","line":1,"column":41,"nodeType":"108","messageId":"109","endLine":1,"endColumn":46},{"ruleId":"106","severity":1,"message":"121","line":24,"column":11,"nodeType":"108","messageId":"109","endLine":24,"endColumn":18},{"ruleId":"122","severity":1,"message":"123","line":35,"column":8,"nodeType":"124","endLine":35,"endColumn":17,"suggestions":"125"},{"ruleId":"106","severity":1,"message":"126","line":1,"column":29,"nodeType":"108","messageId":"109","endLine":1,"endColumn":34},{"ruleId":"122","severity":1,"message":"127","line":33,"column":8,"nodeType":"124","endLine":33,"endColumn":40,"suggestions":"128"},{"ruleId":"122","severity":1,"message":"129","line":39,"column":8,"nodeType":"124","endLine":39,"endColumn":20,"suggestions":"130"},{"ruleId":"122","severity":1,"message":"131","line":42,"column":8,"nodeType":"124","endLine":42,"endColumn":20,"suggestions":"132"},{"ruleId":"106","severity":1,"message":"112","line":1,"column":10,"nodeType":"108","messageId":"109","endLine":1,"endColumn":13},"no-native-reassign",["133"],"no-negated-in-lhs",["134"],"no-unused-vars","'resRegister' is assigned a value but never used.","Identifier","unusedVar","'Button' is defined but never used.","'Typography' is defined but never used.","'Box' is defined but never used.","'Container' is defined but never used.","'useMediaQuery' is defined but never used.","'CLIENT_URL' is defined but never used.","no-redeclare","'lat1' is already defined.","redeclared","'lat2' is already defined.","'Paper' is defined but never used.","'classes' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'id'. Either include it or remove the dependency array.","ArrayExpression",["135"],"'Input' is defined but never used.","React Hook useEffect has a missing dependency: 'isAuthenticated'. Either include it or remove the dependency array.",["136"],"React Hook useEffect has missing dependencies: 'history', 'login', 'password', and 'username'. Either include them or remove the dependency array.",["137"],"React Hook useEffect has missing dependencies: 'history', 'password', 'password2', 'register', and 'username'. Either include them or remove the dependency array.",["138"],"no-global-assign","no-unsafe-negation",{"desc":"139","fix":"140"},{"desc":"141","fix":"142"},{"desc":"143","fix":"144"},{"desc":"145","fix":"146"},"Update the dependencies array to be: [id, loading]",{"range":"147","text":"148"},"Update the dependencies array to be: [isAuthenticated, isOrdering, placeFrom, placeTo]",{"range":"149","text":"150"},"Update the dependencies array to be: [history, login, password, submitting, username]",{"range":"151","text":"152"},"Update the dependencies array to be: [history, password, password2, register, submitting, username]",{"range":"153","text":"154"},[1043,1052],"[id, loading]",[1280,1312],"[isAuthenticated, isOrdering, placeFrom, placeTo]",[1206,1218],"[history, login, password, submitting, username]",[1322,1334],"[history, password, password2, register, submitting, username]"]